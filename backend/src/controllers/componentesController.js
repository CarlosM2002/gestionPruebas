import pool from '../config/db.js';
export async function listTipos(req,res){ try{ const q=await pool.query('SELECT * FROM "TipoComponente" ORDER BY "IdTipoComponente"'); res.json(q.rows);}catch(e){console.error(e);res.status(500).json({message:'Error'})} }
export async function createTipo(req,res){ try{ const {Nombre,Descripcion}=req.body; const q=await pool.query('INSERT INTO "TipoComponente" ("Nombre","Descripcion") VALUES ($1,$2) RETURNING *',[Nombre,Descripcion||null]); res.status(201).json(q.rows[0]); }catch(e){console.error(e);res.status(500).json({message:'Error'})} }
export async function listComponentes(req,res){ try{ const q=await pool.query('SELECT c.*, t."Nombre" as "TipoNombre" FROM "Componente" c JOIN "TipoComponente" t ON t."IdTipoComponente"=c."IdTipoComponente" ORDER BY c."IdComponente"'); res.json(q.rows);}catch(e){console.error(e);res.status(500).json({message:'Error'})} }
export async function createComponente(req,res){ try{ const {Nombre,Descripcion,IdTipoComponente}=req.body; const q=await pool.query('INSERT INTO "Componente" ("Nombre","Descripcion","IdTipoComponente") VALUES ($1,$2,$3) RETURNING *',[Nombre,Descripcion||null,IdTipoComponente]); res.status(201).json(q.rows[0]); }catch(e){console.error(e);res.status(500).json({message:'Error'})} }
